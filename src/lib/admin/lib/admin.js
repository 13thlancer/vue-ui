layui.define("view",function(e){var y=layui.jquery,s=layui.laytpl,a=layui.element,r=layui.setter,i=layui.whui,t=layui.view,l=y(window),o=y("body"),n=y("#"+r.container),u="layui-show",m="layui-this",c="layui-disabled",d="#LAY_app_body",h="LAY_app_flexible",f="layadmin-side-spread-sm",p="layadmin-tabsbody-item",v="layui-icon-shrink-right",b="layui-icon-spread-left",g="layadmin-side-shrink",C={v:"1.0.0",req:t.req,sendAuthCode:function(i){var t,l=(i=y.extend({seconds:60,elemPhone:"#LAY_phone",elemVercode:"#LAY_vercode"},i)).seconds,n=function(e){var a=y(i.elem);--l<0?(a.removeClass(c).html("获取验证码"),l=i.seconds,clearInterval(t)):a.addClass(c).html(l+"秒后重获"),e||(t=setInterval(function(){n(!0)},1e3))};o.on("click",i.elem,function(){i.elemPhone=y(i.elemPhone),i.elemVercode=y(i.elemVercode);var e=i.elemPhone,a=e.val();if(l===i.seconds&&!y(this).hasClass(c)){if(!/^1\d{10}$/.test(a))return e.focus(),layer.msg("请输入正确的手机号");if("object"==typeof i.ajax){var t=i.ajax.success;delete i.ajax.success}C.req(y.extend(!0,{url:"/auth/code",type:"get",data:{phone:a},success:function(e){layer.msg("验证码已发送至你的手机，请注意查收",{icon:1,shade:0}),i.elemVercode.focus(),n(),t&&t(e)}},i.ajax))}})},screen:function(){var e=l.width();return 1200<=e?3:992<=e?2:768<=e?1:0},exit:t.exit,sideFlexible:function(e){var a=n,t=y("#"+h),i=C.screen();"spread"===e?(t.removeClass(b).addClass(v),i<2?a.addClass(f):a.removeClass(f),a.removeClass(g)):(t.removeClass(v).addClass(b),i<2?a.removeClass(g):a.addClass(g),a.removeClass(f)),layui.event.call(this,r.MOD_NAME,"side({*})",{status:e})},escape:function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},on:function(e,a){return layui.onevent.call(this,r.MOD_NAME,e,a)},popup:t.popup,popupRight:function(e){return C.popup.index=layer.open(y.extend({type:1,id:"LAY_adminPopupR",anim:-1,title:!1,closeBtn:!1,offset:"r",shade:.1,shadeClose:!0,skin:"layui-anim layui-anim-rl layui-layer-adminRight",area:"300px"},e))},theme:function(e){r.theme;var t=layui.data(r.tableName),a="LAY_layadmin_theme",i=document.createElement("style"),l=s([".layui-side-menu,",".layadmin-pagetabs .layui-tab-title li:after,",".layadmin-pagetabs .layui-tab-title li.layui-this:after,",".layui-layer-admin .layui-layer-title,",".layadmin-side-shrink .layui-side-menu .layui-nav>.layui-nav-item>.layui-nav-child","{background-color:{{d.color.main}} !important;}",".layui-nav-tree .layui-this,",".layui-nav-tree .layui-this>a,",".layui-nav-tree .layui-nav-child dd.layui-this,",".layui-nav-tree .layui-nav-child dd.layui-this a","{background-color:{{d.color.selected}} !important;}",".layui-layout-admin .layui-logo{background-color:{{d.color.logo || d.color.main}} !important;}","{{# if(d.color.header){ }}",".layui-layout-admin .layui-header{background-color:{{ d.color.header }};}",".layui-layout-admin .layui-header a,",".layui-layout-admin .layui-header a cite{color: #f8f8f8;}",".layui-layout-admin .layui-header a:hover{color: #fff;}",".layui-layout-admin .layui-header .layui-nav .layui-nav-more{border-top-color: #fbfbfb;}",".layui-layout-admin .layui-header .layui-nav .layui-nav-mored{border-color: transparent; border-bottom-color: #fbfbfb;}",".layui-layout-admin .layui-header .layui-nav .layui-this:after, .layui-layout-admin .layui-header .layui-nav-bar{background-color: #fff; background-color: rgba(255,255,255,.5);}",".layadmin-pagetabs .layui-tab-title li:after{display: none;}","{{# } }}"].join("")).render(e=y.extend({},t.theme,e)),n=document.getElementById(a);"styleSheet"in i?(i.setAttribute("type","text/css"),i.styleSheet.cssText=l):i.innerHTML=l,i.id=a,n&&o[0].removeChild(n),o[0].appendChild(i),o.attr("layadmin-themealias",e.color.alias),t.theme=t.theme||{},layui.each(e,function(e,a){t.theme[e]=a}),layui.data(r.tableName,{key:"theme",value:t.theme})},initTheme:function(e){var a=r.theme;e=e||0,a.color[e]&&(a.color[e].index=e,C.theme({color:a.color[e]}))},tabsPage:{},tabsBody:function(e){return y(d).find("."+p).eq(e||0)},tabsBodyChange:function(e){C.tabsBody(e).addClass(u).siblings().removeClass(u),x.rollPage("auto",e)},resize:function(e){var a=layui.router().path.join("-");l.off("resize",C.resizeFn[a]),e(),C.resizeFn[a]=e,l.on("resize",C.resizeFn[a])},resizeFn:{},runResize:function(){var e=layui.router().path.join("-");C.resizeFn[e]&&C.resizeFn[e]()},delResize:function(){var e=layui.router().path.join("-");l.off("resize",C.resizeFn[e]),delete C.resizeFn[e]},correctRouter:function(e){return/^\//.test(e)||(e="/"+e),e.replace(/^(\/+)/,"/").replace(new RegExp("/"+r.entry+"$"),"/")},closeThisTabs:function(){C.tabsPage.index&&y(F).eq(C.tabsPage.index).find(".layui-tab-close").trigger("click")}},x=C.events={logout:function(){layer.confirm("确定退出吗？",{title:"提示"},function(e){var a=i.getLocalData("remUsername"),t=i.getLocalData("username");layui.data(r.tableName,null),i.isNotEmpty(a)&&(i.setLocalData("remUsername",a),i.setLocalData("username",t)),C.exit(),layer.close(e)})},flexible:function(e){var a=e.find("#"+h).hasClass(b);C.sideFlexible(a?"spread":null)},refresh:function(){layui.index.render()},serach:function(i){i.off("keypress").on("keypress",function(e){if(this.value.replace(/\s/g,"")&&13===e.keyCode){var a=i.attr("lay-action"),t=i.attr("lay-text")||"搜索";a+=this.value,t=t+' <span style="color: #FF5722;">'+C.escape(this.value)+"</span>",location.hash=C.correctRouter(a),x.serach.keys||(x.serach.keys={}),x.serach.keys[C.tabsPage.index]=this.value,this.value===x.serach.keys[C.tabsPage.index]&&x.refresh(i),this.value=""}})},message:function(e){e.find(".layui-badge-dot").remove()},theme:function(){C.popupRight({id:"LAY_adminPopupTheme",success:function(){t(this.id).render("system/theme")}})},note:function(e){var a=C.screen()<2,l=layui.data(r.tableName).note;x.note.index=C.popup({title:"便签",shade:0,offset:["41px",a?null:e.offset().left-250+"px"],anim:-1,id:"LAY_adminNote",skin:"layadmin-note layui-anim layui-anim-upbit",content:'<textarea placeholder="内容"></textarea>',resize:!1,success:function(e,a){var t=e.find("textarea"),i=void 0===l?"便签中的内容会存储在本地，这样即便你关掉了浏览器，在下次打开时，依然会读取到上一次的记录。是个非常小巧实用的本地备忘录":l;t.val(i).focus().on("keyup",function(){layui.data(r.tableName,{key:"note",value:this.value})})}})},fullscreen:function(e){var a,t="layui-icon-screen-full",i="layui-icon-screen-restore",l=e.children("i");l.hasClass(t)?((a=document.body).webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.requestFullScreen&&a.requestFullscreen(),l.addClass(i).removeClass(t)):((a=document).webkitCancelFullScreen?a.webkitCancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.cancelFullScreen?a.cancelFullScreen():a.exitFullscreen&&a.exitFullscreen(),l.addClass(t).removeClass(i))},about:function(){C.popupRight({id:"LAY_adminPopupAbout",success:function(){t(this.id).render("system/about")}})},more:function(){C.popupRight({id:"LAY_adminPopupMore",success:function(){t(this.id).render("system/more")}})},back:function(){history.back()},setTheme:function(e){var a=e.data("index");e.siblings(".layui-this").data("index");e.hasClass(m)||(e.addClass(m).siblings(".layui-this").removeClass(m),C.initTheme(a))},rollPage:function(e,t){var l=y("#LAY_app_tabsheader"),n=l.children("li"),s=(l.prop("scrollWidth"),l.outerWidth()),r=parseFloat(l.css("left"));if("left"===e){if(!r&&r<=0)return;var i=-r-s;n.each(function(e,a){var t=y(a).position().left;if(i<=t)return l.css("left",-t),!1})}else"auto"===e?function(){var e,a=n.eq(t);if(a[0]){if((e=a.position().left)<-r)return l.css("left",-e);if(e+a.outerWidth()>=s-r){var i=e+a.outerWidth()-(s-r);n.each(function(e,a){var t=y(a).position().left;if(0<t+r&&i<t-r)return l.css("left",-t),!1})}}}():n.each(function(e,a){var t=y(a),i=t.position().left;if(i+t.outerWidth()>=s-r)return l.css("left",-i),!1})},leftPage:function(){x.rollPage("left")},rightPage:function(){x.rollPage()},closeThisTabs:function(){C.closeThisTabs()},closeOtherTabs:function(e){var t="LAY-system-pagetabs-remove";"all"===e?(y(F+":gt(0)").remove(),y(d).find("."+p+":gt(0)").remove()):(y(F).each(function(e,a){e&&e!==C.tabsPage.index&&(y(a).addClass(t),C.tabsBody(e).addClass(t))}),y("."+t).remove())},closeAllTabs:function(){x.closeOtherTabs("all"),location.hash=""},shade:function(){C.sideFlexible()}};!function(){var e=layui.data(r.tableName);e.theme?C.theme(e.theme):r.theme&&C.initTheme(r.theme.initColorIndex),o.addClass("layui-layout-body"),C.screen()<1&&delete r.pageTabs,r.pageTabs||n.addClass("layadmin-tabspage-none");var a=layui.device();a.ie&&a.ie<10&&t.error("IE"+a.ie+"下访问可能不佳，推荐使用：Chrome / Firefox / Edge 等高级浏览器",{offset:"auto",id:"LAY_errorIE"})}(),C.on("hash(side)",function(e){var a,o,u=e.path,c=function(e){return{list:e.children(".layui-nav-child"),name:e.data("name"),jump:e.data("jump")}},t=y("#LAY-system-side-menu"),d="layui-nav-itemed";t.find("."+m).removeClass(m),C.screen()<2&&C.sideFlexible(),a=t.children("li"),o=C.correctRouter(u.join("/")),a.each(function(e,a){var t=y(a),r=c(t),i=r.list.children("dd"),l=u[0]===r.name||0===e&&!u[0]||r.jump&&o===C.correctRouter(r.jump);if(i.each(function(e,a){var t=y(a),n=c(t),i=n.list.children("dd"),l=u[0]===r.name&&u[1]===n.name||n.jump&&o===C.correctRouter(n.jump);if(i.each(function(e,a){var t=y(a),i=c(t);if(u[0]===r.name&&u[1]===n.name&&u[2]===i.name||i.jump&&o===C.correctRouter(i.jump)){var l=i.list[0]?d:m;return t.addClass(l).siblings().removeClass(l),!1}}),l){var s=n.list[0]?d:m;return t.addClass(s).siblings().removeClass(s),!1}}),l){var n=r.list[0]?d:m;return t.addClass(n).siblings().removeClass(n),!1}})}),a.on("nav(layadmin-system-side-menu)",function(e){e.siblings(".layui-nav-child")[0]&&n.hasClass(g)&&(C.sideFlexible("spread"),layer.close(e.data("index"))),C.tabsPage.type="nav"}),a.on("nav(layadmin-pagetabs-nav)",function(e){var a=e.parent();a.removeClass(m),a.parent().removeClass(u)});var k=function(e){var a=e.attr("lay-id"),t=e.attr("lay-attr"),i=e.index();C.tabsBodyChange(i),location.hash=a===r.entry?"/":t},F="#LAY_app_tabsheader>li";o.on("click",F,function(){var e=y(this),a=e.index();if(C.tabsPage.type="tab",C.tabsPage.index=a,"iframe"===e.attr("lay-attr"))return C.tabsBodyChange(a);k(e),C.runResize()}),a.on("tabDelete(layadmin-layout-tabs)",function(e){var a=y(F+".layui-this");e.index&&C.tabsBody(e.index).remove(),k(a),C.delResize()}),o.on("click","*[lay-href]",function(){var e=y(this),a=e.attr("lay-href");layui.router();C.tabsPage.elem=e,location.hash=C.correctRouter(a)}),o.on("click","*[layadmin-event]",function(){var e=y(this),a=e.attr("layadmin-event");x[a]&&x[a].call(this,e)}),o.on("mouseenter","*[lay-tips]",function(){var e=y(this);if(!e.parent().hasClass("layui-nav-item")||n.hasClass(g)){var a=e.attr("lay-tips"),t=e.attr("lay-offset"),i=e.attr("lay-direction"),l=layer.tips(a,this,{tips:i||1,time:-1,success:function(e,a){t&&e.css("margin-left",t+"px")}});e.data("index",l)}}).on("mouseleave","*[lay-tips]",function(){layer.close(y(this).data("index"))});var z=layui.data.resizeSystem=function(){layer.closeAll("tips"),z.lock||setTimeout(function(){C.sideFlexible(C.screen()<2?"":"spread"),delete z.lock},100),z.lock=!0};l.on("resize",layui.data.resizeSystem),e("admin",C)});